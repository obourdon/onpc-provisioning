- description: "Set initial instance_info if not defined on node"
  conditions:
    - op: "is-empty"
      field: "node://instance_info"
  actions:
    - action: "set-attribute"
      path: "/instance_info/kernel"
      value: "{{ ironic_image_kernel }}"
    - action: "set-attribute"
      path: "/instance_info/ramdisk"
      value: "{{ ironic_image_ramdisk }}"
    - action: "set-attribute"
      path: "/instance_info/image_source"
      value: "{{ ironic_image_qcow2 }}"
    - action: "set-attribute"
      path: "/instance_info/image_checksum"
      value: "{{ ironic_image_checksum }}"
    - action: "set-attribute"
      path: "/instance_info/root_gb"
      value: "{{ ironic_root_size }}"

- description: "Set instance_info.ramdisk if empty"
  conditions:
    - op: "is-empty"
      field: "node://instance_info.ramdisk"
  actions:
    - action: "set-attribute"
      path: "/instance_info/ramdisk"
      value: "{{ ironic_image_ramdisk }}"

- description: "Set instance_info.kernel if empty"
  conditions:
    - op: "is-empty"
      field: "node://instance_info.kernel"
  actions:
    - action: "set-attribute"
      path: "/instance_info/kernel"
      value: "{{ ironic_image_kernel }}"

- description: "Set instance_info.image_source if empty"
  conditions:
    - op: "is-empty"
      field: "node://instance_info.image_source"
  actions:
    - action: "set-attribute"
      path: "/instance_info/image_source"
      value: "{{ ironic_image_qcow2 }}"

- description: "Set instance_info.image_checksum if empty"
  conditions:
    - op: "is-empty"
      field: "node://instance_info.image_checksum"
  actions:
    - action: "set-attribute"
      path: "/instance_info/image_checksum"
      value: "{{ ironic_image_checksum }}"

- description: "Set instance_info.root_gb if empty"
  conditions:
    - op: "is-empty"
      field: "node://instance_info.root_gb"
  actions:
    - action: "set-attribute"
      path: "/instance_info/root_gb"
      value: "{{ ironic_root_size }}"
